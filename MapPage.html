<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyDArYdyABFtER6IWwrfnsQq8jwd8JFt1po&sensor=false">
    </script>
<script src="jquery-1.9.1.min.js"></script>
    <script type="text/javascript">
    var geocoder;
    var infowindow = new google.maps.InfoWindow();
    var map;
      function initialize() 
      {
        var mapOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.TERRAIN
        };
        geocoder = new google.maps.Geocoder();
        map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);
        var image = 'FlagIconTest.png';
        var myLatLng = new google.maps.LatLng(-34.397, 150.644);
        var beachMarker = new google.maps.Marker({
          position:myLatLng,
          map:map,
          icon:image
        });
      }
      google.maps.event.addDomListener(window, 'load', initialize);

      function GeocodeReversePhotos()
      {
        $.ajax({
              type: "GET",
              url: "Photos.php?query=GetGPSInformation",
              success: function(msg)
              {
                var GPSInf = JSON.parse(msg);
		var TSelector = document.getElementById("TrailSelector");
		var TrailIDArray = new Array();
	
		for (var i = 0; i < GPSInf.length; i++)
		{
			if ($.inArray(GPSInf[i]["TRAILID"], TrailIDArray) == -1) {
				var option = document.createElement("option");
				option.text = GPSInf[i]["TRAILID"];
				TSelector.add(option, null);
				TrailIDArray.push(GPSInf[i]["TRAILID"]);
			}
		}
              },
              error: function(jqXHR, textStatus, errorThrown) 
              {
                alert("failed" + jqXHR + textStatus + errorThrown);
              }
             });
      }

      function codeLatLng(lat, lng) 
      {

        var latlng = new google.maps.LatLng(lat, lng);
        geocoder.geocode({'latLng': latlng}, function(results, status) 
        {
          if (status == google.maps.GeocoderStatus.OK) {
            if (results[1]) {
              map.setZoom(11);
              marker = new google.maps.Marker({
                  position: latlng,
                  map: map
              });
              infowindow.setContent(results[0].formatted_address);
              infowindow.open(map, marker);
            } else {
              alert('No results found');
            }
          } else {
            alert('Geocoder failed due to: ' + status);
          }
        });
      }

      function UploadPhoto()
      {

      }
    </script>
  </head>
  <body>
    <div id="TitleBar">
      <p> Welcome to TrailView</p>
      <p style="display:inline"> Mikey's Profile </p> 
      <button onclick="javascript:GeocodeReversePhotos()"> Load Image Locations</button>
      <form action="LOL.php" method="post" enctype="multipart/form-data">
      <label for="file">Filename:</label>
      <input type="file" name="file" id="file"><br>
      <input type="submit" name="submit" value="Submit">
      </form>
      <select id="TrailSelector">
        <option value="default">Click a trail to view photos</option>
        <option value="Skyline">Skyline Trail</option>
      </select>
    </div>
    <div id="map-canvas"/>
  </body>
</html>
